{% load static %}

<a name="hist"></a>
<article class="art3">
    <h1 class="C_title">history</h1>
  <div class="main area">
    <div style="overflow:auto; width: 200xp; height: 300px;">
      <div class="table area" style="margin-right:40px;">
        <table class="table-box">
          {% if mycars.exists %}
          <caption> {{ mycar.user_id }} </caption>
          <thead>
            <tr class="table_title">
              <td><h1>User_ID</h1></td>
              <td><h1>Speed</h1></td>
              <td><h1>Battery</h1></td>
              <td><h1>Color</h1></td>
              <td><h1>Created_at</h1></td>
            </tr>
          </thead>
            {% for mycar in mycars %}
              <tbody>
                <tr>
                  <td><h1>{{mycar.user_name}}</h1></td>
                    <td><h1>{{ mycar.mycar_speed }}</h1></td>
                    <td><h1>{{ mycar.mycar_battery }}</h1></td>
                    <td><h1>{{ mycar.mycar_color }}</h1></td>
                    <td><h1>{{ mycar.created_at }}</h1></td>
            {% endfor %}
                </tr>
              </tbody>
            </table>
        {% endif %}
    </div>
  </div>
  </div>
<div class="setting_box">
  <h3>SETTING</h3>
  <h5>기본설정은 1개만 설정됩니다.</h5>
  <div class="selectBox">
    <select name="modelss" class="select">
      <option disabled selected>모델을 선택해 주세요 </option>
      <option value="r1">R1</option>
      <option value="r1mini">R1 mini</option>
      <option value="allr1">All R1</option>
    </select>
    <span class="icoArrow">&#9989;</span> </div>
</br></br>
<a href="{{get_delete_url}}">삭제</a></p>
  <form class="setting area" action="createmycar/" method="post">
      {% csrf_token %}
      <div class="ckbox area">
          <label class="checkbox area">수기입력
              <input type="checkbox" id="ck1" onclick="toggleTextBox(this)"/>
              <p style="display: none;" id="textbox"></p>
          </label>
          <br/>
          <label class="multi click">다중세팅
              <input type="checkbox" id="mtck" onclick="toggleMulti(this)"/>
          </label>
        </br></br>
      </div>
      <div id="selbox">
        <select id="selectCon" onchange="changebar()" name="mycarselector">
          <option value="none">선택하세요</option>
          <option value="battery">배터리</option>
          <option value="speed">속도</option>
          <option value="color">색상</option>
      </select>
      <div id="textin" style="display: block;">
        <input type="text" placeholder="숫자로 입력해주세요"/>
    </div>
    <div id="colorin" style="display: none;">
        <input type="color" value="#ff0000">
    </div>

          <span class="icoArrow">&#9989;</span>
        </div>      
      <div class="multiset" id="mtset" style="display: none;" >
          <div >
          <input type="range" min="0" max="100" id="bat" step="1" value="0" name="battery" value="battery">
          <br/>
          <label for="bat">BATTERY : 
          <span id="batval" class="batval"></span> % </label>
        </div>
          <div>
          <input type="range" min="0" max="100" id="spd" step="1" value="0" name="speed" id="spdrange">
          <br/>
          <label for="spd">SPEED :
          <output id="spdval" class="spdval"></output> km/h </label>
          <br/>
          </div>
          <div>
          <input type="color" name="color" id="col"><br/>
          <label>COLOR : <output for="col" class="col"></output></label>
          <br/>
          </div>
      </div>

      <div class="two text" id="twotext" style="display: none;">
          <input type="text" value="" placeholder="세팅모드를 적어주세요" name="name">
          <br/>
          <input type="text" value="" placeholder="숫자로 입력해주세요">
          <br/>
      </div>

      <div class="color area" id="colorbox" style="display: none;">
          <input type="color" >
          <span class="color" style="display: none;"></span>
      </div>
    </br></br>
      <div class="submin area">
          <button class="btn-c" type="submit"><span>전송</span></button>
      </div>
  </form>
    </div>
</div>
</article>


<script>
  const inid = document.getElementById('idinput');
  var selectbox = document.getElementById('selectbox');
  var setval =selectbox.options[selectbox.selectIndex].value;
  
  // const userid = get

</script>
<script>

    $(() => {
      $(".batval").text($("input[name='battery']").val())
      $(".encoder_value").text($("input[name='encoder']").val())
  })

</script>

<script>

document.querySelector('#bat').addEventListener('input',e=>{
document.querySelector('#batval').innerHTML = e.target.value;
});

document.querySelector('#spd').addEventListener('input',e=>{
document.querySelector('#spdval').innerHTML = e.target.value;
});
</script>

<script>
  function changebar(){
      var sel = document.getElementById('selectCon');
      console.log(sel);
      var textin = document.getElementById('textin');
      console.log(textin);
      var colorin = document.getElementById('colorin');
      console.log(colorin);
      var selt = sel.options[sel.selectedIndex].value;
      console.log(selt);

      if(selt == 'color'){
          textin.style.display = 'none';
          colorin.style.display = 'block';
      }else{
          textin.style.display = 'block';
          colorin.style.display = 'none';
      }
  }
</script>

<script>
function toggleTextBox(checkbox){
const selbox = document.getElementById('selbox');
const setbox = document.getElementById('twotext');
const textbox = document.getElementById('textbox');

textbox.disabled = checkbox.checked ? false : true ;
selbox.disabled = checkbox.checked ? true : false ;
setbox.disabled = checkbox.checked ? true : false ;


if(textbox.disabled){
    selbox.style.display='block';
    setbox.style.display='none';
}else{
    selbox.style.display = 'none';
    setbox.style.display = 'block';
}
}
</script>

<script>
function toggleMulti(checkbox){
const selbox = document.getElementById('selbox');
const mtset = document.getElementById('mtset');
const textbox = document.getElementById('textbox');

selbox.disabled = checkbox.checked ? true : false ;
mtset.disabled = checkbox.checked ? true : false ;
textbox.disabled = checkbox.checked ? true : false ;

if(textbox.disabled){
    selbox.style.display = 'none';
    mtset.style.display = 'block';
}else{
    selbox.style.display = 'block';
    mtset.style.display = 'none';
}

}
</script>